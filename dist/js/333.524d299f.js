"use strict";(self["webpackChunkbig_screen"]=self["webpackChunkbig_screen"]||[]).push([[333],{9120:function(t,a,e){e.d(a,{BZ:function(){return r},Be:function(){return d},Ch:function(){return o},hK:function(){return l},kW:function(){return s},mg:function(){return u},rP:function(){return i},sx:function(){return c}});var n=e(1184);const o=t=>n.A.get("/sold/soldPage",{params:t}),i=t=>n.A.get("/sold/detailPage",{params:t}),l=t=>n.A.post("/sold/detailAdd",t),s=t=>n.A.get("/maintain/maintainPage",{params:t}),r=t=>n.A.get(`/maintain/maintainContent/${t}`),d=t=>n.A.post("/maintain/maintainUpdate",t),c=t=>n.A.get("/fault/faultPage",{params:t}),u=t=>n.A.post("/fault/faultUpdate",t)},7333:function(t,a,e){e.r(a),e.d(a,{default:function(){return pt}});var n=e(6768),o=e(4232);const i={class:"container"},l={class:"menuList"},s=["onClick"],r={class:"main"};function d(t,a,e,d,c,u){return(0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("div",l,[(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.menuList,((t,a)=>((0,n.uX)(),(0,n.CE)("li",{onClick:t=>u.changeMenu(a),key:a,class:(0,o.C4)({active:a===c.activeMenu})},[(0,n.Lk)("span",null,(0,o.v_)(t.label),1)],10,s)))),128))])]),(0,n.Lk)("div",r,[((0,n.uX)(),(0,n.Wv)((0,n.$y)(c.menuList[c.activeMenu].component)))])])}var c=e(5130);const u={class:"dataAnalysis"},p={class:"filter"},m={class:"tableBox"},h={class:"paginationBox"};function b(t,a,e,o,i,l){const s=(0,n.g2)("el-table-column"),r=(0,n.g2)("el-button"),d=(0,n.g2)("el-table"),b=(0,n.g2)("el-pagination");return(0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("div",p,[(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,[a[4]||(a[4]=(0,n.Lk)("span",{class:"label"},"设备ID：",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",placeholder:"请输入",class:"inp","onUpdate:modelValue":a[0]||(a[0]=t=>i.form.monitorId=t)},null,512),[[c.Jo,i.form.monitorId]])]),(0,n.Lk)("li",null,[a[5]||(a[5]=(0,n.Lk)("span",{class:"label"},"客户名称：",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",placeholder:"请输入",class:"inp","onUpdate:modelValue":a[1]||(a[1]=t=>i.form.clientName=t)},null,512),[[c.Jo,i.form.clientName]])]),(0,n.Lk)("li",null,[(0,n.Lk)("button",{class:"btn",onClick:a[2]||(a[2]=(...t)=>l.doSearch&&l.doSearch(...t))},"查询"),(0,n.Lk)("button",{class:"btn",onClick:a[3]||(a[3]=(...t)=>l.exportData&&l.exportData(...t))},"导出")])])]),(0,n.Lk)("div",m,[(0,n.bF)(d,{data:i.tableData,style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)(s,{prop:"monitorId",align:"center",label:"设备ID","show-overflow-tooltip":""}),(0,n.bF)(s,{prop:"soldCount",align:"center",label:"维修次数","show-overflow-tooltip":""}),(0,n.bF)(s,{prop:"clientName",align:"center",label:"客户","show-overflow-tooltip":""}),(0,n.bF)(s,{align:"center",label:"操作"},{default:(0,n.k6)((t=>[(0,n.bF)(r,{onClick:a=>l.handleClick(t.row),type:"text",size:"small"},{default:(0,n.k6)((()=>a[6]||(a[6]=[(0,n.eW)("详情 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),(0,n.Lk)("div",h,[(0,n.bF)(b,{onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange,total:i.total,"current-page":i.pagination.pn,"page-size":i.pagination.size,background:"",layout:"total, prev, pager, next"},null,8,["onSizeChange","onCurrentChange","total","current-page","page-size"])])])}e(4114),e(1454);var g=e(9120),k=(e(4603),e(7566),e(8721),e(1184));function f(t){let a="";const e=[null,void 0,"undefined","","null"];for(const i of Object.keys(t)){const l=t[i];var n=encodeURIComponent(i)+"=";if(!e.includes(l))if("object"===typeof l)for(const t of Object.keys(l)){let e=i+"["+t+"]";var o=encodeURIComponent(e)+"=";a+=o+encodeURIComponent(l[t])+"&"}else a+=n+encodeURIComponent(l)+"&"}return a}function v(t,a,e){return k.A.post(t,a,{transformRequest:[t=>f(t)],headers:{"Content-Type":"application/x-www-form-urlencoded",token:localStorage.getItem("token")},responseType:"blob"}).then((t=>{const a=t,n=new Blob([a]);if("download"in document.createElement("a")){const t=document.createElement("a");t.download=e,t.style.display="none",t.href=URL.createObjectURL(n),document.body.appendChild(t),t.click(),URL.revokeObjectURL(t.href),document.body.removeChild(t)}else navigator.msSaveBlob(n,e)})).catch((t=>{console.error(t)}))}var D=e(9122),C=e.n(D),L={data(){return{tableData:[],form:{monitorId:void 0,clientName:void 0},pagination:{pn:1,size:10},total:0}},mounted(){this.getData()},methods:{async getData(){const t=await(0,g.Ch)({...this.pagination,...this.form});200===t.code&&(this.tableData=t.data.records,this.total=t.data.total)},doSearch(){this.getData()},exportData(){v("http://146.56.215.178:9999/msg/errorExport?"+C().stringify({ids:JSON.stringify(this.tableData.map((t=>t.id)))}))},async handleClick(t){this.$router.push({name:"equipmentServiceDetail",query:{monitorId:t.monitorId}})},handleSizeChange(t){this.pagination.size=t,this.getData()},handleCurrentChange(t){this.pagination.pn=t,this.getData()}}},y=e(1241);const w=(0,y.A)(L,[["render",b],["__scopeId","data-v-030aaa3a"]]);var S=w;const x={class:"dataAnalysis"},I={class:"filter"},z={class:"tableBox"},E=["onClick"],F={class:"paginationBox"};function _(t,a,e,i,l,s){const r=(0,n.g2)("el-table-column"),d=(0,n.g2)("el-button"),u=(0,n.g2)("el-table"),p=(0,n.g2)("el-pagination"),m=(0,n.g2)("EditMaintenance");return(0,n.uX)(),(0,n.CE)("div",x,[(0,n.Lk)("div",I,[(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,[a[4]||(a[4]=(0,n.Lk)("span",{class:"label"},"设备ID：",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",placeholder:"请输入",class:"inp","onUpdate:modelValue":a[0]||(a[0]=t=>l.form.monitorId=t)},null,512),[[c.Jo,l.form.monitorId]])]),(0,n.Lk)("li",null,[(0,n.Lk)("button",{class:"btn",onClick:a[1]||(a[1]=(...t)=>s.doSearch&&s.doSearch(...t))},"查询"),(0,n.Lk)("button",{class:"btn",onClick:a[2]||(a[2]=(...t)=>s.exportData&&s.exportData(...t))},"导出")])])]),(0,n.Lk)("div",z,[(0,n.bF)(u,{data:l.tableData,style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)(r,{align:"center",label:"设备ID","show-overflow-tooltip":""},{default:(0,n.k6)((a=>[(0,n.Lk)("div",{onClick:e=>t.getCurrentScope(a)},[(0,n.Lk)("span",null,(0,o.v_)(a.row.monitorId),1)],8,E)])),_:1}),(0,n.bF)(r,{prop:"runTime",align:"center",label:"总运行时常","show-overflow-tooltip":""}),(0,n.bF)(r,{prop:"maintainCount",align:"center",label:"维保次数","show-overflow-tooltip":""}),(0,n.bF)(r,{prop:"remindTime",align:"center",label:"提醒时间","show-overflow-tooltip":""}),(0,n.bF)(r,{align:"center",label:"操作"},{default:(0,n.k6)((t=>[(0,n.bF)(d,{onClick:a=>s.handleClick(t.row),type:"text",size:"small"},{default:(0,n.k6)((()=>a[5]||(a[5]=[(0,n.eW)("编辑 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),(0,n.Lk)("div",F,[(0,n.bF)(p,{onSizeChange:s.handleSizeChange,onCurrentChange:s.handleCurrentChange,total:l.total,"current-page":l.pagination.pn,"page-size":l.pagination.size,background:"",layout:"total, prev, pager, next"},null,8,["onSizeChange","onCurrentChange","total","current-page","page-size"])]),l.showEdit?((0,n.uX)(),(0,n.Wv)(m,{key:0,updateData:l.editData,onDoSubmit:a[3]||(a[3]=t=>l.showEdit=!1&s.getData())},null,8,["updateData"])):(0,n.Q3)("",!0)])}const A={class:"editCustomer"},U={class:"addBox"},V={class:"formData"},B={class:"label"},M=["onUpdate:modelValue"],X={class:"btns"};function Y(t,a,e,i,l,s){return(0,n.uX)(),(0,n.CE)("div",A,[(0,n.Lk)("div",U,[a[2]||(a[2]=(0,n.Lk)("h3",{class:"title"},"编辑提醒",-1)),(0,n.Lk)("div",V,[(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.submitData,((t,a,e)=>((0,n.uX)(),(0,n.CE)("li",{key:a},[(0,n.Lk)("div",B,"事宜"+(0,o.v_)(e+1)+"：",1),(0,n.bo)((0,n.Lk)("input",{type:"text",name:"","onUpdate:modelValue":t=>l.submitData[a]=t,id:"",class:"inp",placeholder:"请输入"},null,8,M),[[c.Jo,l.submitData[a]]])])))),128))])]),(0,n.Lk)("div",X,[(0,n.Lk)("div",{class:"btn",onClick:a[0]||(a[0]=t=>s.doSubmit(1))},"取消"),(0,n.Lk)("div",{class:"btn",onClick:a[1]||(a[1]=t=>s.doSubmit(2))},"完成")])])])}e(8992),e(3949);var $={props:["updateData"],data(){return{submitData:{content1:"",content2:"",content3:"",content4:"",content5:"",content6:""}}},async mounted(){const{id:t}=this.updateData,a=await(0,g.BZ)(t);if(200!=a.code)return void this.$message({message:"获取数据失败",type:"warning"});const e=a.data;this.submitData=Object.assign(this.submitData,e)},methods:{async doSubmit(t){if(1==t)return this.$emit("doSubmit"),void this.reset();const a=await(0,g.Be)({id:this.updateData.id,...this.submitData});200==a.code?(this.$message({message:"操作成功",type:"success"}),this.reset(),this.$emit("doSubmit")):this.$message({message:"操作失败",type:"warning"})},reset(){this.submitData=Object.keys(this.submitData).forEach((t=>{this.submitData[t]=""}))}}};const J=(0,y.A)($,[["render",Y],["__scopeId","data-v-1b868cb1"]]);var O=J,T={components:{EditMaintenance:O},data(){return{tableData:[],form:{monitorId:""},pagination:{pn:1,size:10},total:0,showEdit:!1,editData:{}}},mounted(){this.getData()},methods:{async getData(){const t=await(0,g.kW)({...this.pagination,...this.form});200===t.code&&(this.tableData=t.data.records,this.total=t.data.total)},doSearch(){this.getData()},exportData(){v("http://146.56.215.178:9999/msg/maintainExport?"+C().stringify({ids:JSON.stringify(this.tableData.map((t=>t.id)))}))},async handleClick(t){this.editData={...t},this.showEdit=!0},handleSizeChange(t){this.pagination.size=t,this.getData()},handleCurrentChange(t){this.pagination.pn=t,this.getData()}}};const j=(0,y.A)(T,[["render",_],["__scopeId","data-v-28f8e0ed"]]);var R=j;const W={class:"dataAnalysis"},N={class:"filter"},P={class:"datePick"},H={class:"tableBox"},q=["onClick"],K={class:"paginationBox"};function Q(t,a,e,i,l,s){const r=(0,n.g2)("el-date-picker"),d=(0,n.g2)("el-table-column"),u=(0,n.g2)("el-button"),p=(0,n.g2)("el-table"),m=(0,n.g2)("el-pagination"),h=(0,n.g2)("EditFaultAlarm");return(0,n.uX)(),(0,n.CE)("div",W,[(0,n.Lk)("div",N,[(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,[a[5]||(a[5]=(0,n.Lk)("span",{class:"label"},"设备编号：",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",placeholder:"请输入",class:"inp","onUpdate:modelValue":a[0]||(a[0]=t=>l.form.monitorId=t)},null,512),[[c.Jo,l.form.monitorId]])]),(0,n.Lk)("li",null,[a[6]||(a[6]=(0,n.Lk)("span",{class:"label"},"质保日期：",-1)),(0,n.Lk)("div",P,[(0,n.bF)(r,{format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:l.form.errorTime,"onUpdate:modelValue":a[1]||(a[1]=t=>l.form.errorTime=t),type:"datetime",placeholder:"选择日期时间"},null,8,["modelValue"])])]),(0,n.Lk)("li",null,[(0,n.Lk)("button",{class:"btn",onClick:a[2]||(a[2]=(...t)=>s.doSearch&&s.doSearch(...t))},"查询"),(0,n.Lk)("button",{class:"btn",onClick:a[3]||(a[3]=(...t)=>s.exportData&&s.exportData(...t))},"导出")])])]),(0,n.Lk)("div",H,[(0,n.bF)(p,{data:l.tableData,style:{width:"100%"}},{default:(0,n.k6)((()=>[(0,n.bF)(d,{prop:"monitorId",align:"center",label:"设备ID","show-overflow-tooltip":""},{default:(0,n.k6)((a=>[(0,n.Lk)("div",{onClick:e=>t.getCurrentScope(a)},[(0,n.Lk)("span",null,(0,o.v_)(a.row.monitorId),1)],8,q)])),_:1}),(0,n.bF)(d,{prop:"errorTime",align:"center",label:"故障时间","show-overflow-tooltip":""}),(0,n.bF)(d,{prop:"analysis",align:"center",label:"故障分析报告","show-overflow-tooltip":""}),(0,n.bF)(d,{prop:"solve",align:"center",label:"故障解决方案","show-overflow-tooltip":""}),(0,n.bF)(d,{align:"center",label:"操作"},{default:(0,n.k6)((t=>[(0,n.bF)(u,{onClick:a=>s.handleClick(t.row),type:"text",size:"small"},{default:(0,n.k6)((()=>a[7]||(a[7]=[(0,n.eW)("编辑 ")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),(0,n.Lk)("div",K,[(0,n.bF)(m,{onSizeChange:s.handleSizeChange,onCurrentChange:s.handleCurrentChange,total:l.total,"current-page":l.pagination.pn,"page-size":l.pagination.size,background:"",layout:"total, prev, pager, next"},null,8,["onSizeChange","onCurrentChange","total","current-page","page-size"])]),l.showEdit?((0,n.uX)(),(0,n.Wv)(h,{key:0,updateData:l.editData,onDoSubmit:a[4]||(a[4]=t=>l.showEdit=!1&s.getData())},null,8,["updateData"])):(0,n.Q3)("",!0)])}const Z={class:"editCustomer"},G={class:"addBox"},tt={class:"formData"},at={class:"datePick"},et={class:"btns"};function nt(t,a,e,o,i,l){const s=(0,n.g2)("el-date-picker");return(0,n.uX)(),(0,n.CE)("div",Z,[(0,n.Lk)("div",G,[a[10]||(a[10]=(0,n.Lk)("h3",{class:"title"},"编辑提醒",-1)),(0,n.Lk)("div",tt,[(0,n.Lk)("ul",null,[(0,n.Lk)("li",null,[a[6]||(a[6]=(0,n.Lk)("div",{class:"label"},"设备id：",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=t=>i.submitData.monitorId=t),name:"",id:"",class:"inp",placeholder:"请输入"},null,512),[[c.Jo,i.submitData.monitorId]])]),(0,n.Lk)("li",null,[a[7]||(a[7]=(0,n.Lk)("div",{class:"label"},"故障时间：",-1)),(0,n.Lk)("div",at,[(0,n.bF)(s,{modelValue:i.submitData.errorTime,"onUpdate:modelValue":a[1]||(a[1]=t=>i.submitData.errorTime=t),type:"datetime",placeholder:"选择日期时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])])]),(0,n.Lk)("li",null,[a[8]||(a[8]=(0,n.Lk)("div",{class:"label"},"故障分析报告：",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",name:"","onUpdate:modelValue":a[2]||(a[2]=t=>i.submitData.analysis=t),id:"",class:"inp",placeholder:"请输入"},null,512),[[c.Jo,i.submitData.analysis]])]),(0,n.Lk)("li",null,[a[9]||(a[9]=(0,n.Lk)("div",{class:"label"},"故障解决方案：",-1)),(0,n.bo)((0,n.Lk)("input",{type:"text",name:"","onUpdate:modelValue":a[3]||(a[3]=t=>i.submitData.solve=t),id:"",class:"inp",placeholder:"请输入"},null,512),[[c.Jo,i.submitData.solve]])])])]),(0,n.Lk)("div",et,[(0,n.Lk)("div",{class:"btn",onClick:a[4]||(a[4]=t=>l.doSubmit(1))},"取消"),(0,n.Lk)("div",{class:"btn",onClick:a[5]||(a[5]=t=>l.doSubmit(2))},"完成")])])])}var ot={props:["updateData","isAdd"],data(){return{submitData:{id:"",monitorId:"",errorTime:"",analysis:"",solve:""}}},mounted(){console.log(this.updateData),this.submitData=Object.assign(this.submitData,this.updateData)},methods:{async doSubmit(t){if(1==t)return this.$emit("doSubmit"),void this.reset();const a=await(0,g.mg)(this.submitData);200==a.code?(this.$message({message:"操作成功",type:"success"}),this.reset(),this.$emit("doSubmit")):this.$message({message:"操作失败",type:"warning"})},reset(){this.submitData=Object.keys(this.submitData).forEach((t=>{this.submitData[t]=""}))}}};const it=(0,y.A)(ot,[["render",nt],["__scopeId","data-v-77f07d8c"]]);var lt=it,st={components:{EditFaultAlarm:lt},data(){return{tableData:[],form:{monitorId:void 0,errorTime:void 0},pagination:{pn:1,size:10},total:0,showEdit:!1,editData:{}}},mounted(){this.getData()},methods:{async getData(){const t=await(0,g.sx)({...this.pagination,...this.form});200===t.code&&(this.tableData=t.data.records,this.total=t.data.total)},doSearch(){this.getData()},exportData(){v("http://146.56.215.178:9999/msg/soldExport?"+C().stringify({ids:JSON.stringify(this.tableData.map((t=>t.id)))}))},async handleClick(t){this.editData={...t},this.showEdit=!0},handleSizeChange(t){this.pagination.size=t,this.getData()},handleCurrentChange(t){this.pagination.pn=t,this.getData()}}};const rt=(0,y.A)(st,[["render",Q],["__scopeId","data-v-96e606d4"]]);var dt=rt,ct={components:{afterSalesView:S,maintenanceView:R,faultAlarmView:dt},data(){return{menuList:[{label:"售后记录次数",id:1,component:"afterSalesView"},{label:"设备维保提醒",id:2,component:"maintenanceView"},{label:"故障报警提醒",id:3,component:"faultAlarmView"}],activeMenu:0,tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}],value1:""}},methods:{changeMenu(t){console.log(t),this.activeMenu=t},handleClick(t){console.log(t)}}};const ut=(0,y.A)(ct,[["render",d],["__scopeId","data-v-027d32fe"]]);var pt=ut}}]);
//# sourceMappingURL=333.524d299f.js.map