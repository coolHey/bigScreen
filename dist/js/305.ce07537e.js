"use strict";(self["webpackChunkbig_screen"]=self["webpackChunkbig_screen"]||[]).push([[305],{5305:function(t,e,a){a.r(e),a.d(e,{default:function(){return F}});var l=a(6768),i=a(5130);const n={class:"container"},s={class:"filter"},o={class:"btns"},d={class:"tableBox"},c={class:"paginationBox"};function r(t,e,a,r,u,p){const h=(0,l.g2)("el-table-column"),b=(0,l.g2)("el-button"),m=(0,l.g2)("el-table"),g=(0,l.g2)("el-pagination"),k=(0,l.g2)("EditCustomer");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",n,[(0,l.Lk)("div",s,[(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,[e[6]||(e[6]=(0,l.Lk)("span",{class:"label"},"客户ID：",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",placeholder:"请输入",class:"inp","onUpdate:modelValue":e[0]||(e[0]=t=>u.form.clientId=t)},null,512),[[i.Jo,u.form.clientId]])]),(0,l.Lk)("li",null,[(0,l.Lk)("button",{class:"btn",onClick:e[1]||(e[1]=(...t)=>p.doSearch&&p.doSearch(...t))},"查询"),(0,l.Lk)("button",{class:"btn",onClick:e[2]||(e[2]=t=>u.form.monitorId=void 0)},"重置")])]),(0,l.Lk)("div",o,[(0,l.Lk)("div",{class:"addBtn",onClick:e[3]||(e[3]=(...t)=>p.addItem&&p.addItem(...t))},"新增"),(0,l.Lk)("div",{class:"addBtn",onClick:e[4]||(e[4]=(...t)=>p.exportData&&p.exportData(...t))},"一键导出")])]),(0,l.Lk)("div",d,[(0,l.bF)(m,{data:u.tableData,style:{width:"100%"},onSelectionChange:p.handleSelectionChange},{default:(0,l.k6)((()=>[(0,l.bF)(h,{type:"selection"}),(0,l.bF)(h,{type:"index",align:"center",label:"序号","show-overflow-tooltip":""}),(0,l.bF)(h,{prop:"clientId",align:"center",label:"客户编号","show-overflow-tooltip":""}),(0,l.bF)(h,{prop:"clientName",align:"center","show-overflow-tooltip":"",label:"客户名称"}),(0,l.bF)(h,{prop:"clientAddress",align:"center","show-overflow-tooltip":"",label:"地址"}),(0,l.bF)(h,{prop:"contactPerson",align:"center","show-overflow-tooltip":"",label:"联系人"}),(0,l.bF)(h,{prop:"contactPhone",align:"center","show-overflow-tooltip":"",label:"联系电话"}),(0,l.bF)(h,{align:"center",label:"操作"},{default:(0,l.k6)((t=>[(0,l.bF)(b,{onClick:e=>p.handleClick(t.row),type:"text",size:"small"},{default:(0,l.k6)((()=>e[7]||(e[7]=[(0,l.eW)("编辑 ")]))),_:2},1032,["onClick"]),(0,l.bF)(b,{type:"text",size:"small",onClick:e=>p.deleteItem(t.row)},{default:(0,l.k6)((()=>e[8]||(e[8]=[(0,l.eW)("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"])]),(0,l.Lk)("div",c,[(0,l.bF)(g,{onSizeChange:p.handleSizeChange,onCurrentChange:p.handleCurrentChange,total:u.total,"current-page":u.pagination.pn,"page-size":u.pagination.size,background:"",layout:"total, prev, pager, next"},null,8,["onSizeChange","onCurrentChange","total","current-page","page-size"])])]),u.showEdit?((0,l.uX)(),(0,l.Wv)(k,{key:0,onDoSubmit:e[5]||(e[5]=t=>u.showEdit=!1),updateData:u.editData,"is-add":!u.editData.id},null,8,["updateData","is-add"])):(0,l.Q3)("",!0)],64)}a(4114),a(8992),a(3949),a(4603),a(7566),a(8721);var u=a(1184);const p=t=>u.A.get("/client/archivePage",{params:t}),h=t=>u.A.post("/client/archiveAdd",t),b=t=>u.A.post("/client/archiveUpdate",t),m=t=>u.A.post("/client/archiveDelete/"+t),g=t=>u.A.get("/client/archiveExport",{params:t,responseType:"blob",responseEncoding:"utf8"});var k=a(1219);const v={class:"editCustomer"},D={class:"addBox"},L={class:"formData"},C=["disabled"],f={class:"btns"};function w(t,e,a,n,s,o){return(0,l.uX)(),(0,l.CE)("div",v,[(0,l.Lk)("div",D,[e[12]||(e[12]=(0,l.Lk)("h3",{class:"title"},"编辑客户档案",-1)),(0,l.Lk)("div",L,[(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,[e[7]||(e[7]=(0,l.Lk)("div",{class:"label"},"客户编号：",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",disabled:!a.isAdd,"onUpdate:modelValue":e[0]||(e[0]=t=>s.submitData.clientId=t),name:"",id:"",class:"inp",placeholder:"请输入"},null,8,C),[[i.Jo,s.submitData.clientId]])]),(0,l.Lk)("li",null,[e[8]||(e[8]=(0,l.Lk)("div",{class:"label"},"客户名称：",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>s.submitData.clientName=t),name:"",id:"",class:"inp",placeholder:"请输入"},null,512),[[i.Jo,s.submitData.clientName]])]),(0,l.Lk)("li",null,[e[9]||(e[9]=(0,l.Lk)("div",{class:"label"},"客户地址：",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",name:"","onUpdate:modelValue":e[2]||(e[2]=t=>s.submitData.clientAddress=t),id:"",class:"inp",placeholder:"请输入"},null,512),[[i.Jo,s.submitData.clientAddress]])]),(0,l.Lk)("li",null,[e[10]||(e[10]=(0,l.Lk)("div",{class:"label"},"联系人：",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",name:"","onUpdate:modelValue":e[3]||(e[3]=t=>s.submitData.contactPerson=t),id:"",class:"inp",placeholder:"请输入"},null,512),[[i.Jo,s.submitData.contactPerson]])]),(0,l.Lk)("li",null,[e[11]||(e[11]=(0,l.Lk)("div",{class:"label"},"联系电话：",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",name:"","onUpdate:modelValue":e[4]||(e[4]=t=>s.submitData.contactPhone=t),id:"",class:"inp",placeholder:"请输入"},null,512),[[i.Jo,s.submitData.contactPhone]])])])]),(0,l.Lk)("div",f,[(0,l.Lk)("div",{class:"btn",onClick:e[5]||(e[5]=t=>o.doSubmit(1))},"取消"),(0,l.Lk)("div",{class:"btn",onClick:e[6]||(e[6]=t=>o.doSubmit(2))},"完成")])])])}var y={props:["updateData","isAdd"],data(){return{submitData:{id:"",clientId:"",clientName:"",clientAddress:"",contactPerson:"",contactPhone:""}}},mounted(){console.log(this.updateData),this.submitData=Object.assign(this.submitData,this.updateData)},methods:{async doSubmit(t){if(1==t)return this.$emit("doSubmit"),void this.reset();const e=this.isAdd?await h(this.submitData):await b(this.submitData);200==e.code?(this.$message({message:"操作成功",type:"success"}),this.reset(),this.$emit("doSubmit")):this.$message({message:"操作失败",type:"warning"})},reset(){this.submitData=Object.keys(this.submitData).forEach((t=>{this.submitData[t]=""}))}}},x=a(1241);const S=(0,x.A)(y,[["render",w],["__scopeId","data-v-43cecf3f"]]);var A=S,I={components:{EditCustomer:A},data(){return{tableData:[],form:{id:""},pagination:{pn:1,size:10},total:0,editData:{},showEdit:!1,multipleSelection:[],isAdd:!1}},mounted(){this.getData()},methods:{handleSelectionChange(t){this.multipleSelection=t},async getData(){const t=await p({...this.pagination,...this.form});200===t.code&&(this.tableData=t.data.records,this.total=t.data.total)},doSearch(){this.getData()},exportData(){let t=[];this.multipleSelection.forEach((e=>{console.log(e),t.push(e.id)})),t.length?g({ids:t?t.join(","):""}).then((t=>{const e=document.createElement("a");e.href=URL.createObjectURL(new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"})),e.download="下载文件.xlsx",document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(e.href),console.log(t)})):this.$message({message:"请选择需要导出的数据",type:"warning"})},async addItem(){this.editData={},this.showEdit=!0},async handleClick(t){this.editData={...t},this.showEdit=!0},async deleteItem(t){const e=await m(t.id);200===e.code?k.nk.success("删除成功"):k.nk.error(e.message),this.getData()},handleSizeChange(t){this.pagination.size=t,this.getData()},handleCurrentChange(t){this.pagination.pn=t,this.getData()}}};const E=(0,x.A)(I,[["render",r],["__scopeId","data-v-ad14a4b0"]]);var F=E}}]);
//# sourceMappingURL=305.ce07537e.js.map